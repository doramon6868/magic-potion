<!--
  TopBar.vue - é¡¶éƒ¨åŠŸèƒ½æ ç»„ä»¶

  è¿™ä¸ªç»„ä»¶æ˜¾ç¤ºåœ¨å±å¹•é¡¶éƒ¨ï¼ŒåŒ…å«æ¸¸æˆçš„ä¸»è¦åŠŸèƒ½å…¥å£ï¼š
  1. èƒŒåŒ…æŒ‰é’® - æ‰“å¼€èƒŒåŒ…å¼¹çª—
  2. é‡‘é’±æ˜¾ç¤º - æ˜¾ç¤ºå½“å‰æ‹¥æœ‰çš„é‡‘å¸
  3. å•†åº—æŒ‰é’® - æ‰“å¼€å•†åº—å¼¹çª—

  è¿™ä¸ªç»„ä»¶è¿˜è´Ÿè´£è§¦å‘å¼¹çª—çš„æ‰“å¼€äº‹ä»¶
-->

<template>
  <!--
    é¡¶éƒ¨æ å®¹å™¨
    ä½¿ç”¨ flex å¸ƒå±€è®©ä¸‰ä¸ªå…ƒç´ æ°´å¹³æ’åˆ—
  -->
  <div class="top-bar">

    <!-- ==================== å·¦ä¾§ï¼šæ¸¸æˆæ ‡é¢˜ ==================== -->
    <div class="game-title">
      <span class="title-icon">âœ¨</span>
      <span class="title-text">Magic Potion</span>
    </div>

    <!-- ==================== ä¸­é—´ï¼šé‡‘é’±æ˜¾ç¤º ==================== -->
    <div class="money-display">
      <!-- é‡‘å¸å›¾æ ‡ -->
      <span class="money-icon">ğŸ’°</span>
      <!-- é‡‘é¢æ•°å­— -->
      <span class="money-amount">{{ gameStore.money }}</span>
    </div>

    <!-- ==================== å³ä¾§ï¼šå•†åº—æŒ‰é’® ==================== -->
    <div
      class="top-button shop-button"
      @click="$emit('open-shop')"
    >
      <!-- å•†åº—å›¾æ ‡ -->
      <span class="button-icon">ğŸª</span>
      <!-- æŒ‰é’®æ–‡å­— -->
      <span class="button-text">å•†åº—</span>
    </div>

  </div>
</template>

<script>
// ==================== å¯¼å…¥ä¾èµ– ====================
import { mapStores } from 'pinia'
import { useGameStore } from '../stores/game.js'

export default {
  // ç»„ä»¶åç§°
  name: 'TopBar',

  /**
   * emits: å£°æ˜ç»„ä»¶ä¼šè§¦å‘çš„äº‹ä»¶
   * è¿™æ˜¯ Vue 3 çš„æœ€ä½³å®è·µï¼Œè®©ä»£ç æ›´æ¸…æ™°
   */
  emits: [
    /**
     * open-shop: æ‰“å¼€å•†åº—
     * å½“ç”¨æˆ·ç‚¹å‡»å•†åº—æŒ‰é’®æ—¶è§¦å‘
     */
    'open-shop'
  ],

  /**
   * computed: è®¡ç®—å±æ€§
   */
  computed: {
    /**
     * å°† gameStore æ˜ å°„åˆ°ç»„ä»¶
     * è¿™æ ·å°±å¯ä»¥ç”¨ this.gameStore è®¿é—®çŠ¶æ€
     */
    ...mapStores(useGameStore)
  }
}
</script>

<style scoped>
/**
 * é¡¶éƒ¨æ æ ·å¼
 */

/* é¡¶éƒ¨æ å®¹å™¨ */
.top-bar {
  /* ä½¿ç”¨ flex å¸ƒå±€ */
  display: flex;
  /* å­å…ƒç´ å‚ç›´å±…ä¸­ */
  align-items: center;
  /* å­å…ƒç´ å‡åŒ€åˆ†å¸ƒï¼Œé¦–å°¾å¯¹é½ */
  justify-content: space-between;
  /* å†…è¾¹è· */
  padding: 15px 30px;
  /**
   * èƒŒæ™¯ - åŠé€æ˜é»‘è‰²
   * è®©é¡¶éƒ¨æ åœ¨èƒŒæ™¯ä¸Šæ›´çªå‡º
   */
  background: rgba(0, 0, 0, 0.4);
  /* åœ†è§’ */
  border-radius: 15px;
  /* åº•éƒ¨è¾¹è· */
  margin-bottom: 20px;
  /* å†…é˜´å½± */
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* ==================== æŒ‰é’®æ ·å¼ ==================== */

/* æŒ‰é’®åŸºç¡€æ ·å¼ */
.top-button {
  /* ä½¿ç”¨ flex å‚ç›´æ’åˆ—å›¾æ ‡å’Œæ–‡å­— */
  display: flex;
  flex-direction: column;
  align-items: center;
  /* é¼ æ ‡æ‰‹å‹ */
  cursor: pointer;
  /* å†…è¾¹è· */
  padding: 10px 20px;
  /* åœ†è§’ */
  border-radius: 10px;
  /* è¿‡æ¸¡åŠ¨ç”» */
  transition: all 0.3s ease;
}

/* æŒ‰é’®æ‚¬åœæ•ˆæœ */
.top-button:hover {
  /* èƒŒæ™¯å˜äº® */
  background: rgba(155, 89, 182, 0.3);
  /* å‘ä¸Šç§»åŠ¨ä¸€ç‚¹ */
  transform: translateY(-2px);
  /* é˜´å½± */
  box-shadow: 0 5px 15px rgba(155, 89, 182, 0.4);
}

/* æŒ‰é’®ç‚¹å‡»æ•ˆæœ */
.top-button:active {
  /* å‘ä¸‹ç§»åŠ¨ */
  transform: translateY(0);
}

/* æŒ‰é’®å›¾æ ‡ */
.button-icon {
  /* å›¾æ ‡å¤§å° */
  font-size: 28px;
  /* ä¸‹è¾¹è· */
  margin-bottom: 5px;
  /* é˜´å½± */
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* æŒ‰é’®æ–‡å­— */
.button-text {
  /* æ–‡å­—å¤§å° */
  font-size: 14px;
  /* é¢œè‰² */
  color: white;
  /* å­—é‡ */
  font-weight: 500;
  /* é˜´å½± */
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* ==================== é‡‘é’±æ˜¾ç¤ºæ ·å¼ ==================== */

/* é‡‘é’±æ˜¾ç¤ºå®¹å™¨ */
.money-display {
  /* ä½¿ç”¨ flex æ°´å¹³æ’åˆ— */
  display: flex;
  align-items: center;
  /* èƒŒæ™¯ */
  background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 193, 7, 0.2));
  /* è¾¹æ¡† */
  border: 2px solid rgba(255, 215, 0, 0.5);
  /* åœ†è§’ */
  border-radius: 25px;
  /* å†…è¾¹è· */
  padding: 10px 25px;
  /* é˜´å½± */
  box-shadow:
    0 4px 15px rgba(255, 215, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* é‡‘å¸å›¾æ ‡ */
.money-icon {
  /* å›¾æ ‡å¤§å° */
  font-size: 24px;
  /* å³è¾¹è· */
  margin-right: 8px;
  /* åŠ¨ç”» - è½»å¾®æ—‹è½¬ */
  animation: coin-shine 2s ease-in-out infinite;
}

/* é‡‘é¢æ•°å­— */
.money-amount {
  /* æ–‡å­—å¤§å° */
  font-size: 20px;
  /* é¢œè‰² - é‡‘è‰² */
  color: #ffd700;
  /* å­—é‡ */
  font-weight: bold;
  /* é˜´å½± */
  text-shadow:
    0 0 10px rgba(255, 215, 0, 0.5),
    0 2px 4px rgba(0, 0, 0, 0.3);
  /* ç­‰å®½å­—ä½“ï¼Œæ•°å­—ä¸ä¼šè·³åŠ¨ */
  font-family: 'Courier New', monospace;
}

/* ==================== æ¸¸æˆæ ‡é¢˜æ ·å¼ ==================== */

.game-title {
  display: flex;
  align-items: center;
  padding: 10px 20px;
}

.title-icon {
  font-size: 28px;
  margin-right: 10px;
  animation: sparkle 2s ease-in-out infinite;
}

.title-text {
  font-size: 24px;
  font-weight: bold;
  background: linear-gradient(135deg, #bb8fce, #e91e63);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 2px 10px rgba(155, 89, 182, 0.5);
}

@keyframes sparkle {
  0%, 100% {
    transform: scale(1) rotate(0deg);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.2) rotate(10deg);
    filter: brightness(1.3);
  }
}

/* ==================== åŠ¨ç”»å®šä¹‰ ==================== */

/* é‡‘å¸é—ªå…‰åŠ¨ç”» */
@keyframes coin-shine {
  0%, 100% {
    transform: rotate(0deg) scale(1);
    filter: brightness(1);
  }
  50% {
    transform: rotate(10deg) scale(1.1);
    filter: brightness(1.3);
  }
}
</style>
