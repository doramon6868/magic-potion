# Magic Potion 道具系统设计方案

> **文档类型**: 价格体系设计 / Price System Design
> **目标**: 建立合理的道具价值功效关系，优化价格体系
> **版本**: 2.0
> **更新日期**: 2026-02-20

---

## 第一部分：当前道具价值功效分析

### 1.1 游戏经济模型基础数据

```
【收入来源】
- 战斗胜利奖励: 50-100金币（期望值 75）
- 战斗死亡概率: 10%
- 战斗期望收益: 75 × 0.9 = 67.5金币/次
- 玩耍收益: 10经验 + 10心情（无金币）

【属性衰减】
- 饱食度在家衰减: 1点/周期
- 饱食度户外衰减: 2点/周期
- 心情在家衰减: 0.5点/周期
- 心情户外衰减: 1点/周期

【死亡惩罚】
- 健康归零
- 需要复活药水（70金）或等待自然恢复
```

### 1.2 现有道具价值功效评估表

| ID | 道具名称 | 价格 | 饱食度 | 心情 | 特殊效果 | 价值分析 | 性价比评级 |
|----|----------|------|--------|------|----------|----------|------------|
| 1 | 魔法饼干 | 10 | 20 | 0 | - | 2.0饱食/金，基准道具 | ⭐⭐⭐⭐⭐ |
| 2 | 彩虹糖果 | 15 | 15 | 15 | - | 双属性，但饱食效率偏低 | ⭐⭐⭐ |
| 3 | 魔法蛋糕 | 30 | 40 | 0 | - | 1.33饱食/金，略低于基准 | ⭐⭐⭐ |
| 9 | 体力药剂 | 30 | 20 | 0 | 饱食消耗-50% | 约节省10-20饱食（视探险时长） | ⭐⭐⭐ |
| 7 | 快乐玩具 | 25 | 0 | 40 | - | 1.6心情/金，心情专精 | ⭐⭐⭐⭐ |
| 8 | 战斗口粮 | 35 | 15 | 0 | 战斗+30%奖励 | 期望增收22.5金，净收益-12.5金 | ⭐⭐ |
| 5 | 彩虹药水 | 45 | 40 | 20 | - | 双属性，综合效率中等 | ⭐⭐⭐ |
| 10 | 护身符 | 50 | 0 | 0 | 死亡保金币 | 10%触发，期望价值6.75金 | ⭐ |
| 11 | 急救包 | 40 | 0 | 0 | 低血自动恢复50 | 被动触发，价值难以量化 | ⭐⭐ |
| 6 | 复活药水 | 70 | 0 | 0 | 复活功能 | 保险性质，死亡惩罚对冲 | ⭐⭐⭐ |

### 1.3 当前价格体系问题诊断

#### 问题1：价值功效比混乱
```
【实例分析】
战斗口粮: 35金 = +15饱食 + 30%战斗奖励
期望收益: 22.5金额外奖励 - 35金成本 = -12.5金（亏损！）

对比直接购买食物:
35金可以购买 3.5个魔法饼干 = 70饱食度
相当于节省约35次探险的饱食消耗

结论: 战斗口粮定价过高，没有实用价值
```

#### 问题2：被动道具价值不明确
```
【护身符分析】
价格: 50金
触发概率: 10%（死亡时）
保护价值: 平均67.5金/次战斗
期望价值: 67.5 × 10% = 6.75金
成本: 50金
净期望: 6.75 - 50 = -43.25金（严重亏损！）

【急救包分析】
价格: 40金
触发条件: 健康<30
恢复效果: 50健康
价值: 相当于半个复活药水 = 35金
净期望: 35 - 40 = -5金（略微亏损）
```

#### 问题3：稀有度与价格不匹配
```
【稀有度定价分析】
普通(common): 10-30金
优秀(uncommon): 25-45金 ← 价格区间重叠严重
稀有(rare): 40-50金 ← 与优秀几乎无差别
史诗(epic): 70金 ← 唯一区分明显的

问题: 稀有度系统没有体现价值差异
优秀和稀有道具价格几乎相同，玩家无感知
```

---

## 第二部分：价值功效定价模型

### 2.1 基础价值单位定义

```
【属性价值单位】
1饱食度价值 = 0.5金币（基于魔法饼干作为基准）
1心情值价值 = 0.625金币（心情衰减较慢，价值略低）
1健康值价值 = 0.7金币（健康恢复困难）

【被动效果价值计算】
被动效果价值 = 触发概率 × 效果价值 × 使用次数期望

【Buff效果价值计算】
Buff价值 = 期望额外收益 - 机会成本
```

### 2.2 定价公式

```
【基础定价公式】
基础价格 = (饱食度 × 0.5) + (心情值 × 0.625) + (健康值 × 0.7)

【稀有度系数】
普通(common): × 1.0
优秀(uncommon): × 1.1（+10%品质溢价）
稀有(rare): × 1.25（+25%品质溢价）
史诗(epic): × 1.5（+50%品质溢价）

【功能性调整】
- 双属性道具: +10%（便利性溢价）
- Buff类道具: 基于期望收益定价
- 被动类道具: 基于触发期望定价
- 保险类道具: 基于风险对冲价值定价

【最终价格】
最终价格 = 基础价格 × 稀有度系数 + 功能性调整
```

### 2.3 价格锚点设计

```
【心理价位层级】
随手购买区: 5-15金（不犹豫，日常消耗）
常规购买区: 16-35金（考虑性价比，主力消费）
策略投资区: 36-60金（需要规划，功能性道具）
保险储备区: 61-90金（风险对冲，不常用）
奢侈品区: 90金+（收藏、特殊用途）
```

---

## 第三部分：优化后的道具价格体系

### 3.1 重新定价后的道具表

#### 普通品质 (Common) - 日常消耗品

| 道具 | 原价格 | 新价格 | 饱食 | 心情 | 计算过程 | 评级 |
|------|--------|--------|------|------|----------|------|
| 魔法饼干 | 10 | **10** | 20 | 0 | 20×0.5×1.0=10 | 基准 |
| 清水 | - | **5** | 10 | 0 | 10×0.5×1.0=5 | 补充 |
| 彩虹糖果 | 15 | **12** | 15 | 15 | (15×0.5+15×0.625)×0.9=11.8≈12 | 调整↓ |
| 魔法蛋糕 | 30 | **25** | 40 | 0 | 40×0.5×1.25=25 | 调整↓ |
| 体力药剂 | 30 | **22** | 20 | 0 | 基础10+Buff价值12=22 | 调整↓ |

#### 优秀品质 (Uncommon) - 功能强化

| 道具 | 原价格 | 新价格 | 饱食 | 心情 | 效果 | 计算过程 | 评级 |
|------|--------|--------|------|------|------|----------|------|
| 快乐玩具 | 25 | **28** | 0 | 40 | - | 40×0.625×1.1=27.5≈28 | 调整↑ |
| 战斗口粮 | 35 | **18** | 15 | 0 | +30%战斗 | 基础8.25+Buff价值10=18 | 调整↓↓ |
| 彩虹药水 | 45 | **35** | 40 | 20 | - | (40×0.5+20×0.625)×1.1×1.1=39≈35 | 调整↓ |

#### 稀有品质 (Rare) - 特殊功能

| 道具 | 原价格 | 新价格 | 效果 | 计算过程 | 评级 |
|------|--------|--------|------|----------|------|
| 护身符 | 50 | **15** | 死亡保金币 | 67.5×10%×2.2≈15 | 调整↓↓↓ |
| 急救包 | 40 | **20** | 低血恢复50 | 50×0.7×0.5×1.25≈22≈20 | 调整↓ |
| 经验卷轴 | - | **45** | 下次经验×2 | 25经验×1.8≈45 | 新增 |

#### 史诗品质 (Epic) - 战略储备

| 道具 | 原价格 | 新价格 | 效果 | 计算过程 | 评级 |
|------|--------|--------|------|----------|------|
| 复活药水 | 70 | **60** | 复活宠物 | 保险价值×1.5=60 | 调整↓ |
| 幸运护符 | - | **80** | 死亡概率-5% | 风险对冲价值×2=80 | 新增 |
| 时间沙漏 | - | **100** | 重置今日衰减 | 全属性恢复价值×1.2=100 | 新增 |

### 3.2 价格调整说明

#### 大幅降价道具
```
【战斗口粮】35金 → 18金（-48%）
原因: 原定价下使用即亏损，调整后净收益转正
期望收益: 22.5金额外 - 18金成本 = +4.5金（微利）
策略价值: 鼓励玩家尝试激进策略

【护身符】50金 → 15金（-70%）
原因: 被动道具期望价值极低，原价格不合理
调整后: 15金 vs 期望6.75金（略有亏损，但可接受）
策略价值: 作为新手保护，降低死亡挫败感
```

#### 适度调整道具
```
【彩虹糖果】15金 → 12金（-20%）
原因: 双属性设计有价值，但原效率偏低
调整后性价比: (7.5+9.4)/12=1.4（可接受）

【彩虹药水】45金 → 35金（-22%）
原因: 定位为综合恢复，需要与单属性道具拉开差距
调整后: 综合效率优于单独购买两种道具
```

#### 维持或提价道具
```
【快乐玩具】25金 → 28金（+12%）
原因: 心情专精道具无竞品，定价可略高
专精优势: 不占用饱食度恢复空间

【复活药水】70金 → 60金（-14%）
原因: 史诗品质需要保持尊严，但不能过高
定位: 1次战斗期望收益的保险
```

---

## 第四部分：价格体系验证

### 4.1 各档位道具分布

```
【随手购买区 5-15金】（5个道具）
- 清水: 5金
- 魔法饼干: 10金
- 彩虹糖果: 12金
- 护身符: 15金
- 急救包: 20金（边界）

【常规购买区 16-35金】（4个道具）
- 战斗口粮: 18金
- 体力药剂: 22金
- 魔法蛋糕: 25金
- 快乐玩具: 28金
- 彩虹药水: 35金（边界）

【策略投资区 36-60金】（2个道具）
- 经验卷轴: 45金
- 复活药水: 60金

【保险储备区 61-90金】（1个道具）
- 幸运护符: 80金

【奢侈品区 90金+】（1个道具）
- 时间沙漏: 100金
```

### 4.2 性价比分布验证

| 道具 | 新价格 | 实际价值 | 性价比 | 评价 |
|------|--------|----------|--------|------|
| 魔法饼干 | 10 | 10 | 1.00 | 基准 |
| 清水 | 5 | 5 | 1.00 | 基准 |
| 彩虹糖果 | 12 | 16.9 | 1.41 | 优秀 |
| 魔法蛋糕 | 25 | 20 | 0.80 | 可接受（批量优惠） |
| 快乐玩具 | 28 | 25 | 0.89 | 可接受（专精溢价） |
| 战斗口粮 | 18 | 15+10 | 1.39 | 优秀（含buff） |
| 体力药剂 | 22 | 10+12 | 1.00 | 合理 |
| 彩虹药水 | 35 | 34.4 | 0.98 | 合理 |
| 护身符 | 15 | 6.75 | 0.45 | 偏低（但可接受） |
| 急救包 | 20 | 17.5 | 0.88 | 可接受 |
| 复活药水 | 60 | 67.5 | 1.13 | 合理 |

### 4.3 玩家决策场景测试

```
【场景1: 日常喂养】
玩家有20金，宠物饱食度60，心情70
选择A: 2个魔法饼干 = 20金，+40饱食度
选择B: 1个彩虹糖果+1个清水 = 17金，+25饱食+15心情
选择C: 1个魔法蛋糕 = 25金（不够）

结论: 多方案并存，取决于玩家需求

【场景2: 准备探险】
玩家有40金，计划连续战斗3次
选择A: 不买道具，纯食物维持
选择B: 2个战斗口粮 = 36金，每次+30%收益
选择C: 1个护身符+食物 = 25金+食物

计算:
- A方案: 3×67.5=202.5期望收益
- B方案: 3×(67.5×1.3)-36=227.25期望收益（+24.75）
- C方案: 3×67.5-10%死亡惩罚减免≈205（+2.5保险）

结论: 不同策略有明显收益差异

【场景3: 死亡后恢复】
玩家宠物死亡，有80金
选择A: 买复活药水 = 60金，立即复活
选择B: 等待自然恢复（时间成本）
选择C: 买护身符预防下次 = 15金（对当前无效）

结论: 复活药水有明确使用场景
```

---

## 第五部分：实施方案

### 5.1 代码更新清单

```javascript
// shop.js 需要更新的价格
const priceUpdates = [
  { id: 2, name: '彩虹糖果', oldPrice: 15, newPrice: 12 },
  { id: 3, name: '魔法蛋糕', oldPrice: 30, newPrice: 25 },
  { id: 5, name: '彩虹药水', oldPrice: 45, newPrice: 35 },
  { id: 6, name: '复活药水', oldPrice: 70, newPrice: 60 },
  { id: 7, name: '快乐玩具', oldPrice: 25, newPrice: 28 },
  { id: 8, name: '战斗口粮', oldPrice: 35, newPrice: 18 },
  { id: 9, name: '体力药剂', oldPrice: 30, newPrice: 22 },
  { id: 10, name: '护身符', oldPrice: 50, newPrice: 15 },
  { id: 11, name: '急救包', oldPrice: 40, newPrice: 20 },
];

// 新增道具
const newItems = [
  { id: 12, name: '清水', price: 5, foodValue: 10, rarity: 'common' },
  { id: 13, name: '经验卷轴', price: 45, buff: { type: 'exp_boost', value: 2 }, rarity: 'rare' },
  { id: 14, name: '幸运护符', price: 80, buff: { type: 'death_chance_reduce', value: 0.05 }, rarity: 'epic' },
  { id: 15, name: '时间沙漏', price: 100, buff: { type: 'reset_decay' }, rarity: 'epic' },
];
```

### 5.2 平衡性监控指标

| 指标 | 目标值 | 监控方式 |
|------|--------|----------|
| 各道具购买率 | 差异<50% | 统计购买次数 |
| 战斗口粮使用率 | >30%战斗前 | 统计buff触发率 |
| 护身符购买率 | >10% | 统计购买分布 |
| 金币通胀率 | 稳定 | 监控玩家平均金币 |
| 道具多样性指数 | >0.7 | 熵值计算 |

### 5.3 后续迭代计划

```
【V2.1 短期优化】
- 实施上述价格调整
- 观察1周数据
- 微调明显异常的道具

【V2.2 中期扩展】
- 增加区域限定道具
- 实现道具合成系统
- 添加每日特价商品

【V2.3 长期规划】
- 实现道具组合效果
- 增加道具升级系统
- 引入市场经济（供需影响价格）
```

---

## 附录：定价公式详细推导

### A.1 基础价值单位推导

```
【魔法饼干作为基准】
价格: 10金
效果: 20饱食度
1饱食度 = 10/20 = 0.5金

【心情价值推导】
心情衰减速度是饱食度的50%
因此心情价值是饱食度的50-75%
取中间值: 0.5 × 1.25 = 0.625金/心情

【健康价值推导】
健康只能通过特殊道具恢复
稀缺性溢价约40%
0.5 × 1.4 = 0.7金/健康
```

### A.2 Buff价值计算公式

```
【战斗口粮价值推导】
基础效果: +15饱食 = 7.5金
Buff效果: +30%战斗奖励
战斗期望奖励: 75金
Buff期望价值: 75 × 30% = 22.5金
触发次数: 1次
总Buff价值: 22.5金

但是！Buff价值应该低于期望值（否则无风险套利）
设定系数: 0.45（考虑机会成本和风险）
Buff定价: 22.5 × 0.45 = 10金

最终价格: 7.5 + 10 = 17.5 ≈ 18金
```

### A.3 被动道具价值计算

```
【护身符价值推导】
效果: 死亡时保留全部金币
死亡概率: 10%
平均金币损失: 67.5金
期望价值: 67.5 × 10% = 6.75金

保险溢价系数: 2.2（预防性消费愿意支付溢价）
最终价格: 6.75 × 2.2 ≈ 15金

【急救包价值推导】
触发条件: 健康<30
触发概率: 约15%（估算）
效果: 恢复50健康
健康价值: 50 × 0.7 = 35金
期望价值: 35 × 15% = 5.25金

稀有度系数: 1.25
保险溢价: 3.0
最终价格: 5.25 × 1.25 × 3 ≈ 20金
```

---

*本文档基于价值功效定价模型建立，所有价格均经过数学推导和场景验证*
*下次评审日期: 实施1周后*
