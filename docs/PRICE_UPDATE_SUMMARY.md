# 道具价格体系更新总结

> **更新日期**: 2026-02-20
> **文档类型**: 实施总结

---

## 一、更新概述

本次更新基于 `ITEM_SYSTEM_DESIGN.md` 中设计的价值功效定价模型，对游戏中所有道具的价格进行了重新调整，并新增了4个道具。

### 核心改进

1. **价格合理化**: 基于数学模型重新计算所有道具价格
2. **性价比均衡**: 确保每个道具都有合理的价值功效比
3. **新增道具**: 补充低价和高价位道具，完善价格层级
4. **Buff系统扩展**: 支持经验加成、死亡概率降低等新效果

---

## 二、价格调整详情

### 2.1 降价道具

| 道具 | 原价格 | 新价格 | 降幅 | 调整原因 |
|------|--------|--------|------|----------|
| 彩虹糖果 | 15 | 12 | -20% | 效率偏低，提升性价比 |
| 魔法蛋糕 | 30 | 25 | -17% | 批量购买优惠 |
| 彩虹药水 | 45 | 35 | -22% | 综合恢复效率优化 |
| 体力药剂 | 30 | 22 | -27% | buff价值重新计算 |
| **战斗口粮** | **35** | **18** | **-48%** | **核心调整：原定价使用即亏损** |
| **护身符** | **50** | **15** | **-70%** | **核心调整：被动道具期望价值极低** |
| 急救包 | 40 | 20 | -50% | 触发概率定价 |
| 复活药水 | 70 | 60 | -14% | 史诗品质保持尊严 |

### 2.2 提价道具

| 道具 | 原价格 | 新价格 | 涨幅 | 调整原因 |
|------|--------|--------|------|----------|
| 快乐玩具 | 25 | 28 | +12% | 心情专精无竞品，品质溢价 |

### 2.3 新增道具

| 道具 | 价格 | 效果 | 定位 |
|------|------|------|------|
| 清水 | 5 | +10饱食度 | 最低价位补充 |
| 经验卷轴 | 45 | 下次经验×2 | 稀有品质功能道具 |
| 幸运护符 | 80 | 死亡概率-5% | 史诗品质风险管控 |
| 时间沙漏 | 100 | 重置所有属性 | 史诗品质战略道具 |

---

## 三、价格层级分布

### 优化后的价格结构

```
【随手购买区 5-15金】（日常消耗）
💧 清水 (5金) - 新增
🍪 魔法饼干 (10金)
🍬 彩虹糖果 (12金)
🛡️ 护身符 (15金) - 大幅降价

【常规购买区 16-35金】（主力消费）
⚔️ 战斗口粮 (18金) - 大幅降价
💪 体力药剂 (22金)
🏥 急救包 (20金) - 大幅降价
🍰 魔法蛋糕 (25金)
🎾 快乐玩具 (28金)
🧪 彩虹药水 (35金)

【策略投资区 36-60金】（功能道具）
📜 经验卷轴 (45金) - 新增
💖 复活药水 (60金)

【保险储备区 61-90金】（风险对冲）
🍀 幸运护符 (80金) - 新增

【奢侈品区 90金+】（特殊用途）
⏳ 时间沙漏 (100金) - 新增
```

---

## 四、Buff系统扩展

### 4.1 新增Buff类型

```javascript
// 经验加成
{
  type: 'exp_boost',
  value: 2,        // 经验倍数
  duration: 1      // 生效次数
}

// 死亡概率降低
{
  type: 'death_chance_reduce',
  value: 0.05,     // 降低5%
  duration: 1      // 生效次数（或时间）
}

// 重置属性衰减（立即生效）
{
  type: 'reset_decay',
  value: 1,
  duration: 1      // 立即触发
}
```

### 4.2 Buff处理逻辑更新

- **game.js**: `activateBuff()` 方法支持新buff类型
- **game.js**: `addExperience()` 方法支持经验加成
- **game.js**: `resetAllDecay()` 新方法实现时间沙漏效果
- **outdoor.js**: `finishHunt()` 支持死亡概率调整和战斗奖励加成
- **Shop.vue**: `getBuffDescription()` 支持新buff描述
- **BuffStatus.vue**: 支持新buff显示
- **Item.vue**: `getBuffShortDesc()` 支持新buff短描述

---

## 五、背包初始物品更新

玩家初始背包现在包含：
- 魔法饼干 × 3
- 彩虹糖果 × 2
- 战斗口粮 × 1（试用）
- 护身符 × 1（试用，新增）

---

## 六、代码文件修改清单

### 6.1 核心数据文件

| 文件 | 修改内容 |
|------|----------|
| `src/stores/shop.js` | 更新10个道具价格，新增4个道具 |
| `src/stores/backpack.js` | 更新初始物品，添加护身符试用 |
| `src/stores/game.js` | 扩展Buff系统，新增resetAllDecay方法 |
| `src/stores/outdoor.js` | 支持经验加成和死亡概率调整 |

### 6.2 UI组件文件

| 文件 | 修改内容 |
|------|----------|
| `src/components/Shop.vue` | 支持新buff类型描述 |
| `src/components/BuffStatus.vue` | 支持新buff显示 |
| `src/components/Item.vue` | 支持新buff短描述 |

### 6.3 新增文件

| 文件 | 用途 |
|------|------|
| `src/components/BuffStatus.vue` | 显示当前激活的增益效果 |
| `docs/ITEM_SYSTEM_DESIGN.md` | 价格体系设计文档 |
| `docs/PRICE_UPDATE_SUMMARY.md` | 本文档 |

---

## 七、平衡性预期

### 7.1 预期改善

1. **战斗口粮使用率提升**: 从几乎无人使用到预计30%+战斗前使用
2. **护身符成为新手友好道具**: 低价保护机制降低挫败感
3. **道具多样性增加**: 玩家有更多策略选择
4. **价格层级清晰**: 每个价位都有明确选择

### 7.2 监控指标

```
【需要关注的指标】
- 各道具购买率分布
- 战斗口粮使用率 vs 战斗次数
- 护身符购买率
- 新道具（经验卷轴、幸运护符、时间沙漏）的接受度
- 玩家平均金币持有量变化
```

---

## 八、后续优化计划

### V2.1（1周后）
- 观察数据，微调明显异常的道具
- 根据玩家反馈调整

### V2.2（1个月后）
- 增加区域限定道具掉落
- 实现道具合成系统
- 添加每日特价商品

### V2.3（长期）
- 实现道具组合效果
- 增加道具升级系统
- 引入市场经济机制

---

## 九、定价公式回顾

```
【基础公式】
基础价格 = (饱食度 × 0.5) + (心情值 × 0.625) + (健康值 × 0.7)

【稀有度系数】
普通(common): × 1.0
优秀(uncommon): × 1.1
稀有(rare): × 1.25
史诗(epic): × 1.5

【功能性调整】
- 双属性道具: +10%
- Buff类: 基于期望收益 × 0.45
- 被动类: 基于触发期望 × 2.2

【最终价格】
最终价格 = 基础价格 × 稀有度系数 + 功能性调整
```

---

*本次更新所有价格均经过数学推导和场景验证*
*如有平衡性问题，请参考 `docs/ITEM_SYSTEM_DESIGN.md` 进行微调*
